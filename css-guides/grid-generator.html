<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Grid Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for webkit browsers */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        .grid-item {
            transition: all 0.2s ease-in-out;
        }
        #css-explanations dt {
            font-weight: 600;
            color: #a78bfa; /* A nice violet color */
            word-break: break-all;
        }
        #css-explanations dd {
            margin-left: 1rem;
            margin-bottom: 0.75rem;
            color: #d1d5db; /* Lighter gray for description */
        }
        #css-explanations .experimental-note {
            color: #facc15; /* Yellow-400 */
            font-size: 0.8em;
            display: block;
        }
        input[type="color"] {
            -webkit-appearance: none;
            width: 100%;
            height: 42px;
            border: none;
            padding: 0;
            border-radius: 0.5rem;
            overflow: hidden;
            cursor: pointer;
        }
        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        input[type="color"]::-webkit-color-swatch {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
        }
        .disabled-input {
            background-color: #f3f4f6;
            cursor: not-allowed;
        }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4 md:p-8">
      <header class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900">CSS Grid Generator</h1>
        <p class="text-gray-600 mt-2">Create custom CSS grids with ease. Adjust the settings and get the code instantly.</p>
      </header>
      <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <!-- CONTROLS PANEL -->
        <div class="lg:col-span-4 bg-white p-6 rounded-2xl shadow-lg">
          <h2 class="text-2xl font-semibold mb-6 border-b pb-4">Controls</h2>
          <!-- Grid Dimensions -->
          <div class="space-y-4 mb-6">
            <h3 class="font-semibold text-gray-800">Grid Definition</h3>
            <div>
              <label for="columns" class="block text-sm font-medium text-gray-700 mb-1">Columns</label>
              <input type="number" id="columns" value="4" min="1" max="24" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
              <label for="rows" class="block text-sm font-medium text-gray-700 mb-1">Rows</label>
              <input type="number" id="rows" value="3" min="1" max="24" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
          </div>
          <!-- Gaps -->
          <div class="space-y-4 mb-6">
            <h3 class="font-semibold text-gray-800">Gaps</h3>
            <div>
              <label for="gap" class="block text-sm font-medium text-gray-700 mb-1">Gap (Shorthand)</label>
              <input type="text" id="gap" placeholder="e.g., 16px or 1rem 2rem" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
              <label for="column-gap" class="block text-sm font-medium text-gray-700 mb-1">Column Gap</label>
              <input type="text" id="column-gap" value="16px" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
              <label for="row-gap" class="block text-sm font-medium text-gray-700 mb-1">Row Gap</label>
              <input type="text" id="row-gap" value="16px" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
          </div>
          <!-- Auto Tracks -->
          <div class="space-y-4 mb-6">
            <h3 class="font-semibold text-gray-800">Implicit Tracks</h3>
            <div>
              <label for="grid-auto-columns" class="block text-sm font-medium text-gray-700 mb-1">Grid Auto Columns</label>
              <input type="text" id="grid-auto-columns" value="auto" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
            <div>
              <label for="grid-auto-rows" class="block text-sm font-medium text-gray-700 mb-1">Grid Auto Rows</label>
              <input type="text" id="grid-auto-rows" value="auto" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
          </div>
          <!-- Gap Decorations -->
          <div class="space-y-4 mb-6 border-t pt-6">
            <h3 class="font-semibold text-gray-800">Gap Decorations
              <span class="text-xs font-medium text-yellow-600">(Experimental)</span></h3>
            <div>
              <label for="gap-color" class="block text-sm font-medium text-gray-700 mb-1">Color</label>
              <input type="color" id="gap-color" value="#6366f1" class="w-full p-2 border border-gray-300 rounded-lg">
            </div>
            <div>
              <label for="gap-style" class="block text-sm font-medium text-gray-700 mb-1">Style</label>
              <select id="gap-style" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                <option>solid</option>
                <option>dashed</option>
                <option>dotted</option>
                <option>wavy</option>
              </select>
            </div>
            <div>
              <label for="gap-thickness" class="block text-sm font-medium text-gray-700 mb-1">Thickness</label>
              <input type="text" id="gap-thickness" value="1px" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
            </div>
          </div>
          <!-- Sizing Tracks -->
          <div class="space-y-6 border-t pt-6">
            <div id="column-sizing-container">
              <h3 class="font-semibold mb-2 text-gray-800">Explicit Column Sizing</h3>
              <div id="column-sizing" class="grid grid-cols-2 gap-2"></div>
            </div>
            <div id="row-sizing-container">
              <h3 class="font-semibold mb-2 text-gray-800">Explicit Row Sizing</h3>
              <div id="row-sizing" class="grid grid-cols-2 gap-2"></div>
            </div>
          </div>
          <!-- Actions -->
          <div class="mt-8 border-t pt-6">
            <button id="reset-button" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors">
              Reset Generator
            </button>
          </div>
        </div>
        <!-- PREVIEW & CODE PANEL -->
        <div class="lg:col-span-8 space-y-8">
          <!-- Preview -->
          <div class="bg-white p-6 rounded-2xl shadow-lg">
            <h2 class="text-2xl font-semibold mb-4 border-b pb-4">Live Preview</h2>
            <div id="grid-preview-container" class="w-full h-96 bg-gray-50 p-4 rounded-lg border border-dashed border-gray-300 overflow-hidden">
              <div id="grid-preview" class="h-full w-full"></div>
            </div>
          </div>
          <!-- Code Output -->
          <div class="bg-gray-900 p-6 rounded-2xl shadow-lg">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-2xl font-semibold text-white">Generated CSS</h2>
              <button id="copy-button" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg transition-colors text-sm">
                Copy Code
              </button>
            </div>
            <!-- Experimental Feature Warning -->
            <div id="experimental-warning" class="bg-yellow-500/20 text-yellow-300 p-3 rounded-lg mb-4 text-sm flex items-start gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 flex-shrink-0 mt-0.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg>
              <div>
                <strong>Experimental Feature:</strong>
                The `gap-decoration` properties are non-standard and will only work in Chromium Canary browsers (Chrome, Edge) with the "Experimental Web Platform features" flag enabled.
              </div>
            </div>
            <pre class="bg-gray-800 p-4 rounded-lg overflow-x-auto text-sm"><code id="css-output" class="text-white whitespace-pre-wrap"></code></pre>
            <div class="mt-6 border-t border-gray-700 pt-4">
              <h3 class="text-xl font-semibold text-white mb-3">CSS Property Explanations</h3>
              <div id="css-explanations" class="text-gray-300 text-sm font-mono"></div>
            </div>
          </div>
        </div>
      </main>
      <!-- Toast Notification -->
      <div id="toast" class="fixed bottom-5 right-5 bg-green-500 text-white py-2 px-4 rounded-lg shadow-lg opacity-0 transform translate-y-2 transition-all duration-300">
        Code copied to clipboard!
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
            // --- DOM ELEMENTS ---
            const columnsInput = document.getElementById('columns');
            const rowsInput = document.getElementById('rows');
            const gapInput = document.getElementById('gap');
            const columnGapInput = document.getElementById('column-gap');
            const rowGapInput = document.getElementById('row-gap');
            const autoColumnsInput = document.getElementById('grid-auto-columns');
            const autoRowsInput = document.getElementById('grid-auto-rows');
            const gapColorInput = document.getElementById('gap-color');
            const gapStyleInput = document.getElementById('gap-style');
            const gapThicknessInput = document.getElementById('gap-thickness');
            const columnSizingContainer = document.getElementById('column-sizing');
            const rowSizingContainer = document.getElementById('row-sizing');
            const gridPreview = document.getElementById('grid-preview');
            const cssOutput = document.getElementById('css-output');
            const cssExplanations = document.getElementById('css-explanations');
            const copyButton = document.getElementById('copy-button');
            const resetButton = document.getElementById('reset-button');
            const toast = document.getElementById('toast');

            // --- INITIAL STATE ---
            const defaultState = {
                columns: 4,
                rows: 3,
                gap: '',
                columnGap: '16px',
                rowGap: '16px',
                autoColumns: 'auto',
                autoRows: 'auto',
                gapColor: '#6366f1',
                gapStyle: 'solid',
                gapThickness: '1px',
                columnSizing: Array(4).fill('1fr'),
                rowSizing: Array(3).fill('1fr'),
            };

            let state = { ...defaultState };

            // --- FUNCTIONS ---

            const createSizingInputs = (count, container, type, values) => {
                container.innerHTML = '';
                for (let i = 0; i < count; i++) {
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.value = values[i] || '1fr';
                    input.dataset.index = i;
                    input.dataset.type = type;
                    input.placeholder = `Track ${i + 1}`;
                    input.className = 'w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500';
                    input.addEventListener('change', handleSizingChange);
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            handleSizingChange(e);
                            e.target.blur();
                        }
                    });
                    container.appendChild(input);
                }
            };

            const updateGridPreview = () => {
                gridPreview.style.display = 'grid';
                gridPreview.style.gridTemplateColumns = state.columnSizing.join(' ');
                gridPreview.style.gridTemplateRows = state.rowSizing.join(' ');
                gridPreview.style.gridAutoColumns = state.autoColumns;
                gridPreview.style.gridAutoRows = state.autoRows;
                
                // Set gap properties
                if (state.gap && state.gap.trim() !== '') {
                    gridPreview.style.gap = state.gap;
                } else {
                    gridPreview.style.gap = ''; // Unset shorthand before setting individuals
                    gridPreview.style.columnGap = state.columnGap;
                    gridPreview.style.rowGap = state.rowGap;
                }

                // Set experimental properties
                gridPreview.style.setProperty('--gap-decoration-color', state.gapColor);
                gridPreview.style.setProperty('--gap-decoration-style', state.gapStyle);
                gridPreview.style.setProperty('--gap-decoration-thickness', state.gapThickness);

                gridPreview.innerHTML = '';
                const totalItems = state.columns * state.rows;
                for (let i = 0; i < totalItems; i++) {
                    const item = document.createElement('div');
                    item.className = 'grid-item bg-indigo-200/50 border border-indigo-400/50 rounded-lg flex items-center justify-center text-indigo-800 font-mono text-sm';
                    item.textContent = i + 1;
                    gridPreview.appendChild(item);
                }
            };

            const generateCss = () => {
                let css = `
/* WARNING: The '--gap-decoration-*' properties are experimental 
  and only work in Chromium Canary browsers with the 
  "Experimental Web Platform features" flag enabled.
*/
.grid-container {
    display: grid;
    grid-template-columns: ${state.columnSizing.join(' ')};
    grid-template-rows: ${state.rowSizing.join(' ')};
    grid-auto-columns: ${state.autoColumns};
    grid-auto-rows: ${state.autoRows};
`;

                // Conditionally add gap properties
                if (state.gap && state.gap.trim() !== '') {
                    css += `    gap: ${state.gap};\n`;
                } else {
                    css += `    column-gap: ${state.columnGap};\n`;
                    css += `    row-gap: ${state.rowGap};\n`;
                }

                css += `
    /* Experimental Gap Decoration Properties */
    --gap-decoration-color: ${state.gapColor};
    --gap-decoration-style: ${state.gapStyle};
    --gap-decoration-thickness: ${state.gapThickness};
}
                `;
                cssOutput.textContent = css.trim();
            };

            const generateExplanations = () => {
                let gapExplanations;

                if (state.gap && state.gap.trim() !== '') {
                    gapExplanations = `
                        <dt>gap: ${state.gap};</dt>
                        <dd>A shorthand for setting both row and column gaps. If one value is provided, it applies to both. If two, the first is for row gaps, the second for column gaps.</dd>
                    `;
                } else {
                    gapExplanations = `
                        <dt>column-gap: ${state.columnGap};</dt>
                        <dd>Sets the size of the gap (gutter) between columns.</dd>

                        <dt>row-gap: ${state.rowGap};</dt>
                        <dd>Sets the size of the gap (gutter) between rows.</dd>
                    `;
                }


                const explanations = `
                    <dl>
                        <dt>display: grid;</dt>
                        <dd>This enables Grid Layout, turning the element into a grid container.</dd>

                        <dt>grid-template-columns: ${state.columnSizing.join(' ')};</dt>
                        <dd>Defines the number and size of the columns in your grid explicitly.</dd>

                        <dt>grid-template-rows: ${state.rowSizing.join(' ')};</dt>
                        <dd>Defines the number and size of the rows in your grid explicitly.</dd>
                        
                        <dt>grid-auto-columns: ${state.autoColumns};</dt>
                        <dd>Sets the size for any columns that are created implicitly.</dd>

                        <dt>grid-auto-rows: ${state.autoRows};</dt>
                        <dd>Sets the size for any rows that are created implicitly.</dd>
                        
                        ${gapExplanations}

                        <dt>--gap-decoration-color: ${state.gapColor};</dt>
                        <dd>Sets the color of the gap decoration.
                           <span class="experimental-note">⚠️ Experimental Property</span>
                        </dd>

                        <dt>--gap-decoration-style: ${state.gapStyle};</dt>
                        <dd>Sets the style (e.g., solid, dashed) of the gap decoration.
                           <span class="experimental-note">⚠️ Experimental Property</span>
                        </dd>

                        <dt>--gap-decoration-thickness: ${state.gapThickness};</dt>
                        <dd>Sets the thickness of the gap decoration.
                           <span class="experimental-note">⚠️ Experimental Property</span>
                        </dd>
                    </dl>
                `;
                cssExplanations.innerHTML = explanations;
            };
            
            const render = () => {
                // Update state-driven input values
                columnsInput.value = state.columns;
                rowsInput.value = state.rows;
                gapInput.value = state.gap;
                columnGapInput.value = state.columnGap;
                rowGapInput.value = state.rowGap;
                autoColumnsInput.value = state.autoColumns;
                autoRowsInput.value = state.autoRows;
                gapColorInput.value = state.gapColor;
                gapStyleInput.value = state.gapStyle;
                gapThicknessInput.value = state.gapThickness;
                
                // Disable/enable individual gap inputs based on shorthand
                const isShorthandActive = !!(state.gap && state.gap.trim() !== '');
                columnGapInput.disabled = isShorthandActive;
                rowGapInput.disabled = isShorthandActive;
                columnGapInput.classList.toggle('disabled-input', isShorthandActive);
                rowGapInput.classList.toggle('disabled-input', isShorthandActive);


                createSizingInputs(state.columns, columnSizingContainer, 'column', state.columnSizing);
                createSizingInputs(state.rows, rowSizingContainer, 'row', state.rowSizing);
                
                updateGridPreview();
                generateCss();
                generateExplanations();
            };

            // --- EVENT HANDLERS ---
            const handleShorthandGapChange = (e) => {
                state.gap = e.target.value;
                if (e.target.value.trim() !== '') {
                    state.columnGap = '';
                    state.rowGap = '';
                }
                render();
            };

            const handleIndividualGapChange = (e) => {
                const { id, value } = e.target;
                if (id === 'column-gap') state.columnGap = value;
                if (id === 'row-gap') state.rowGap = value;
                state.gap = '';
                render();
            };

            const handleDimensionChange = (e) => {
                const { id, value } = e.target;
                const newCount = parseInt(value, 10);
                if (id === 'columns') {
                    state.columns = newCount;
                    const newSizing = Array(newCount).fill('1fr');
                    state.columnSizing.slice(0, newCount).forEach((val, i) => newSizing[i] = val);
                    state.columnSizing = newSizing;
                } else if (id === 'rows') {
                    state.rows = newCount;
                    const newSizing = Array(newCount).fill('1fr');
                    state.rowSizing.slice(0, newCount).forEach((val, i) => newSizing[i] = val);
                    state.rowSizing = newSizing;
                }
                render();
            };

            const handleAutoTrackChange = (e) => {
                const { id, value } = e.target;
                if (id === 'grid-auto-columns') state.autoColumns = value;
                if (id === 'grid-auto-rows') state.autoRows = value;
                render();
            };
            
            const handleGapDecorationChange = (e) => {
                const { id, value } = e.target;
                if (id === 'gap-color') state.gapColor = value;
                if (id === 'gap-style') state.gapStyle = value;
                if (id === 'gap-thickness') state.gapThickness = value;
                render();
            };

            const handleSizingChange = (e) => {
                const { dataset, value } = e.target;
                const { type, index } = dataset;
                if (type === 'column') state.columnSizing[index] = value;
                if (type === 'row') state.rowSizing[index] = value;
                render();
            };
            
            const handleReset = () => {
                state = JSON.parse(JSON.stringify(defaultState));
                render();
            };

            const handleCopy = () => {
                const textToCopy = cssOutput.textContent;
                const tempTextArea = document.createElement('textarea');
                tempTextArea.value = textToCopy;
                document.body.appendChild(tempTextArea);
                tempTextArea.select();
                try {
                    document.execCommand('copy');
                    toast.classList.remove('opacity-0', 'translate-y-2');
                    setTimeout(() => {
                        toast.classList.add('opacity-0', 'translate-y-2');
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(tempTextArea);
            };

            // --- EVENT LISTENERS ---
            const addChangeEvent = (element, handler) => {
                element.addEventListener('change', handler);
                if (element.type === 'text' || element.type === 'number') {
                    element.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') {
                            handler(e);
                            e.target.blur();
                        }
                    });
                }
            };

            addChangeEvent(columnsInput, handleDimensionChange);
            addChangeEvent(rowsInput, handleDimensionChange);
            addChangeEvent(gapInput, handleShorthandGapChange);
            addChangeEvent(columnGapInput, handleIndividualGapChange);
            addChangeEvent(rowGapInput, handleIndividualGapChange);
            addChangeEvent(autoColumnsInput, handleAutoTrackChange);
            addChangeEvent(autoRowsInput, handleAutoTrackChange);
            addChangeEvent(gapColorInput, handleGapDecorationChange);
            addChangeEvent(gapStyleInput, handleGapDecorationChange);
            addChangeEvent(gapThicknessInput, handleGapDecorationChange);
            
            resetButton.addEventListener('click', handleReset);
            copyButton.addEventListener('click', handleCopy);

            // --- INITIAL RENDER ---
            render();
        });
    </script>
  </body>
</html>